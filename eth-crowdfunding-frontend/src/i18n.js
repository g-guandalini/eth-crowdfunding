// src/i18n.js
import { createI18n } from 'vue-i18n';

const messages = {
    en: {
      //header
      projects: '‚ú® Projects',
      createProject: '‚ú® Create Project',
      footerText: '2025 Spark Crowdfunding | Developed by:',
      github: 'GitHub',
      //ConnectWallet.vue
      connect_wallet: 'Connect Wallet',
      disconnect: 'Disconnect',
      no_provider: 'No wallet installed in browser.',
      error_connect: 'Error connecting wallet:',
      connection_rejected: 'Connection rejected by user.',
      error_disconnect: 'Error disconnecting wallet:',
      error_unmounted: 'Error removing listeners on unmounted:',
      //ProjectPage.vue
      back_to_all_projects: 'Back to all projects',
      share: 'Share',
      loading_project_details: 'Loading project details',
      project_not_found: 'Project not found',
      fixed_donation: 'Fixed Donation',
      deadline: 'Deadline',
      completed: 'Completed',
      goal: 'Goal',
      raised: 'Raised',
      creator: 'Creator',
      value_for_donation_mon: 'Value for Donation in MON',
      service_fee_donation: 'Service fee: 0.25% on the donation amount.',
      congrats_goal_reached: 'Congratulations! Goal reached!',
      deadline_passed_goal_not_reached: 'Deadline passed. Goal not reached.',
      project_inactive_special_status: 'Project inactive or in special status.',
      donors_can_request_refund: 'Donors can request a refund individually',
      withdraw_goal: 'Withdraw Goal',
      withdraw_donation: 'Withdraw Donation',
      donors: 'Donors',
      no_donors_yet: 'No donors yet for this project.',
      project_not_loaded_for_sharing: 'Project not loaded for sharing.',
      no_wallet_detected_donate: 'No wallet detected. Please install and connect to make donations.',
      project_not_loaded: 'Project not loaded.',
      please_enter_valid_donation_value: 'Please enter a valid donation amount, equal to or greater than 0.001 MON.',
      confirming_your_donation: 'Confirming your donation... Please wait for the transaction to be confirmed.',
      donation_successful: 'Donation successful! ‚úÖ',
      error_donating: 'Error donating:',
      donation_canceled_by_user: 'Donation canceled by user.',
      for_this_project_you_must_donate_exactly: 'For this project, you must donate exactly',
      an_error_occurred_processing_donation: 'An error occurred while processing your donation. Please try again.',
      no_wallet_detected_withdraw: 'No wallet detected. Please install and connect to withdraw funds.',
      requesting_goal_withdrawal: 'Requesting goal withdrawal... Please wait for the transaction.',
      goal_withdrawal_successful: 'Goal withdrawal successful! üéâ',
      error_withdrawing_goal: 'Error withdrawing goal:',
      goal_withdrawal_canceled_by_user: 'Goal withdrawal canceled by user.',
      check_requirements: 'Check requirements.',
      no_wallet_detected_refund: 'No wallet detected. Please install and connect to request a refund.',
      requesting_donation_refund: 'Requesting donation refund... Please wait for the transaction.',
      donation_refund_successful: 'Donation refund successful! ‚úÖ',
      error_requesting_refund: 'Error requesting refund:',
      refund_canceled_by_user: 'Refund canceled by user.',
      wallet_detected_but_cannot_connect_readonly: 'Wallet detected, but could not connect or get signer address. Loading projects in read-only mode (ProjectPage).',
      no_wallet_detected_public_readonly: 'No wallet detected. Loading projects with public provider (read-only - ProjectPage).',
      cannot_initialize_ethereum_provider: 'Could not initialize an Ethereum provider for ProjectPage. Check RPC configuration.',
      error_fetching_user_donation: 'Error fetching logged-in user\'s donation:',
      error_loading_project_with_id: 'Error loading project with ID',
      project_not_found_or_invalid_blockchain_id: 'Project not found or invalid ID on the blockchain.',
      an_error_occurred_loading_project_details: 'An error occurred while loading project details. Check blockchain connection and RPC URL.',
      fixed_text: 'Fixed',
      donate: 'Donate',
      view_project: 'View Project',
      all_projects: 'All Projects',
      my_projects: 'My Projects',
      my_contributions: 'My Contributions',
      search_projects_by_title_placeholder: 'Search projects by title...',
      sort_by_deadline: 'Sort by: Deadline',
      sort_by_progress: 'Sort by: Percentage raised relative to goal',
      sort_by_goal_amount: 'Sort by: Goal Amount',
      create_new_project_title: '‚ú® Create New Project ‚ú®',
      project_title_label: 'Project Title',
      project_title_placeholder: 'Ex: My Awesome Project',
      characters_count: '{current} / {max} characters', // Parameterized message
      title_exceeded_limit: 'The project title exceeded the {max} character limit.',
      description_label: 'Description',
      description_placeholder: 'Tell us more about your project, what it will do, and why it needs support.',
      markdown_tip_part1: 'üìù You can use ',
      markdown_link_text: 'Markdown',
      markdown_tip_part2: ' to format the description (e.g., **bold**, *italic*, ## titles, etc.).',
      goal_label: 'Funding Goal (MON)',
      goal_placeholder: 'Ex: 10.5 (numbers only, use dot for decimals)',
      deadline_label: 'Funding Deadline Date',
      donation_type_label: 'Donation Type',
      free_value: 'Free Value',
      fixed_value: 'Fixed Value',
      fixed_donation_label: 'Fixed Donation Value (MON)',
      fixed_donation_placeholder: 'Ex: 0.05 (numbers only, use dot for decimals)',
      creating_project_button: 'Creating Project...',
      create_project_button: 'Create Project',
  
      // Validation/Error Messages (for toasts and console)
      title_required: 'The project title is mandatory.',
      description_required: 'The project description is mandatory.',
      goal_numeric_positive_error: 'The goal must be a positive number (e.g., 0.01, 10).',
      correct_goal_field: 'Correct the \'Funding Goal\' field.',
      deadline_required: 'The deadline date is mandatory.',
      correct_deadline_field: 'Correct the \'Funding Deadline\' field.',
      deadline_in_future_error: 'The deadline date must be in the future.',
      fixed_value_min_error: 'The fixed value must be equal to or greater than 0.001 MON.',
      correct_fixed_donation_field: 'Correct the \'Fixed Donation Value\' field.',
      fixed_value_greater_than_goal_error: 'The fixed donation value cannot be greater than the funding goal.',
      sending_transaction_confirm_wallet: 'Sending transaction... Please confirm in your wallet.',
      transaction_sent_waiting_blockchain: 'Transaction sent! Waiting for blockchain confirmation...',
      project_created_success: 'Project created successfully! üéâ',
      project_creation_canceled_by_user: 'Project creation canceled by user.',
      error_creating_project_prefix: 'Error creating project:', // Prefix for console.error
      generic_error_creating_project: 'An error occurred while creating the project. Please try again.',
      blockchain_error: 'Blockchain Error:',
      transaction_error: 'Transaction Error:',
      general_error: 'Error:',
    },
    'pt-br': {
      //header
      projects: '‚ú® Projetos',
      createProject: '‚ú® Criar Projeto',
      footerText: '2025 Spark Crowdfunding | Desenvolvido por:',
      github: 'GitHub',
      //ConnectWallet.vue
      connect_wallet: 'Conectar Carteira',
      disconnect: 'Desconectar',
      no_provider: 'Nenhuma carteira instalada no navegador.',
      error_connect: 'Erro ao conectar carteira:',
      connection_rejected: 'Conex√£o rejeitada pelo usu√°rio.',
      error_disconnect: 'Erro ao desconectar carteira:',
      error_unmounted: 'Erro ao remover listeners no unmounted:',
      //ProjectPage.vue
      back_to_all_projects: 'Voltar para todos os projetos',
      share: 'Compartilhar',
      loading_project_details: 'Carregando detalhes do projeto',
      project_not_found: 'Projeto n√£o encontrado',
      fixed_donation: 'Doa√ß√£o Fixa',
      deadline: 'Prazo',
      completed: 'Conclu√≠do',
      goal: 'Meta',
      raised: 'Arrecadado',
      creator: 'Criador',
      value_for_donation_mon: 'Valor para Doa√ß√£o em MON',
      service_fee_donation: 'Taxa de servi√ßo: 0.25% sobre o valor da doa√ß√£o.',
      congrats_goal_reached: 'Parab√©ns! Meta alcan√ßada!',
      deadline_passed_goal_not_reached: 'Prazo encerrado. Meta n√£o alcan√ßada.',
      project_inactive_special_status: 'Projeto inativo ou em estado especial.',
      donors_can_request_refund: 'Doadores podem solicitar reembolso individualmente',
      withdraw_goal: 'Sacar Meta',
      withdraw_donation: 'Sacar Doa√ß√£o',
      donors: 'Doadores',
      no_donors_yet: 'Ainda n√£o h√° doadores para este projeto.',
      project_not_loaded_for_sharing: 'Projeto n√£o carregado para compartilhamento.',
      no_wallet_detected_donate: 'Nenhuma carteira detectada. Por favor, instale e conecte-se para realizar doa√ß√µes.',
      project_not_loaded: 'Projeto n√£o carregado.',
      please_enter_valid_donation_value: 'Por favor, insira um valor v√°lido para a doa√ß√£o, igual ou superior a 0.001 MON.',
      confirming_your_donation: 'Confirmando sua doa√ß√£o... Por favor, aguarde a transa√ß√£o ser confirmada.',
      donation_successful: 'Doa√ß√£o realizada com sucesso! üéâ',
      error_donating: 'Erro ao doar:',
      donation_canceled_by_user: 'Doa√ß√£o cancelada pelo usu√°rio.',
      for_this_project_you_must_donate_exactly: 'Para este projeto, voc√™ deve doar exatamente',
      an_error_occurred_processing_donation: 'Ocorreu um erro ao processar sua doa√ß√£o. Por favor, tente novamente.',
      no_wallet_detected_withdraw: 'Nenhuma carteira detectada. Por favor, instale e conecte-se para sacar os fundos.',
      requesting_goal_withdrawal: 'Solicitando saque da meta... Por favor, aguarde a transa√ß√£o.',
      goal_withdrawal_successful: 'Saque da meta realizado com sucesso! üéâ',
      error_withdrawing_goal: 'Erro ao sacar meta:',
      goal_withdrawal_canceled_by_user: 'Saque da meta cancelado pelo usu√°rio.',
      check_requirements: 'Verifique os requisitos.',
      no_wallet_detected_refund: 'Nenhuma carteira detectada. Por favor, instale e conecte-se para solicitar o reembolso.',
      requesting_donation_refund: 'Solicitando reembolso da doa√ß√£o... Por favor, aguarde a transa√ß√£o.',
      donation_refund_successful: 'Reembolso da doa√ß√£o realizado com sucesso! ‚úÖ',
      error_requesting_refund: 'Erro ao solicitar reembolso:',
      refund_canceled_by_user: 'Reembolso cancelado pelo usu√°rio.',
      wallet_detected_but_cannot_connect_readonly: 'Carteira detectada, mas n√£o foi poss√≠vel conectar ou obter o endere√ßo do signat√°rio. Carregando projetos em modo somente leitura (ProjectPage).',
      no_wallet_detected_public_readonly: 'Nenhuma carteira detectada. Carregando projetos com provedor p√∫blico (somente leitura - ProjectPage).',
      cannot_initialize_ethereum_provider: 'N√£o foi poss√≠vel inicializar um provedor Ethereum para ProjectPage. Verifique a configura√ß√£o do RPC.',
      error_fetching_user_donation: 'Erro ao buscar doa√ß√£o do usu√°rio logado:',
      error_loading_project_with_id: 'Erro ao carregar projeto com ID',
      project_not_found_or_invalid_blockchain_id: 'Projeto n√£o encontrado ou ID inv√°lido na blockchain.',
      an_error_occurred_loading_project_details: 'Ocorreu um erro ao carregar os detalhes do projeto. Verifique a conex√£o com a blockchain e o URL RPC.',
      fixed_text: 'Fixo',
      donate: 'Doar',
      view_project: 'Ver Projeto',
      all_projects: 'Todos os Projetos',
      my_projects: 'Meus Projetos',
      my_contributions: 'Minhas Colabora√ß√µes',
      search_projects_by_title_placeholder: 'Buscar projetos por t√≠tulo...',
      sort_by_deadline: 'Ordernar por: Prazo',
      sort_by_progress: 'Ordernar por: Percentual arrecadado em rela√ß√£o √† meta',
      sort_by_goal_amount: 'Ordernar por: Meta', 
      create_new_project_title: '‚ú® Criar Novo Projeto ‚ú®',
      project_title_label: 'T√≠tulo do Projeto',
      project_title_placeholder: 'Ex: Meu Projeto Incr√≠vel',
      characters_count: '{current} / {max} caracteres', // Mensagem parametrizada
      title_exceeded_limit: 'O t√≠tulo do projeto excedeu o limite de {max} caracteres.',
      description_label: 'Descri√ß√£o',
      description_placeholder: 'Conte mais sobre o seu projeto, o que ele far√° e por que ele precisa de apoio.',
      markdown_tip_part1: 'üìù Voc√™ pode usar ',
      markdown_link_text: 'Markdown',
      markdown_tip_part2: ' para formatar a descri√ß√£o (ex: **negrito**, *it√°lico*, ## t√≠tulos, etc.).',
      goal_label: 'Meta de Arrecada√ß√£o (MON)',
      goal_placeholder: 'Ex: 10.5 (apenas n√∫meros, use ponto para decimais)',
      deadline_label: 'Data Limite para Arrecada√ß√£o',
      donation_type_label: 'Tipo de Doa√ß√£o',
      free_value: 'Valor Livre',
      fixed_value: 'Valor Fixo',
      fixed_donation_label: 'Valor Fixo da Doa√ß√£o (MON)',
      fixed_donation_placeholder: 'Ex: 0.05 (apenas n√∫meros, use ponto para decimais)',
      creating_project_button: 'Criando Projeto...',
      create_project_button: 'Criar Projeto',
  
      // Mensagens de Valida√ß√£o/Erro (para toasts e console)
      title_required: 'O t√≠tulo do projeto √© obrigat√≥rio.',
      description_required: 'A descri√ß√£o do projeto √© obrigat√≥ria.',
      goal_numeric_positive_error: 'A meta deve ser um n√∫mero positivo (ex: 0.01, 10).',
      correct_goal_field: 'Corrija o campo \'Meta de Arrecada√ß√£o\'.',
      deadline_required: 'A data limite √© obrigat√≥ria.',
      correct_deadline_field: 'Corrija o campo \'Data Limite para Arrecada√ß√£o\'.',
      deadline_in_future_error: 'A data limite deve ser no futuro.',
      fixed_value_min_error: 'O valor fixo deve ser igual ou superior a 0.001 MON.',
      correct_fixed_donation_field: 'Corrija o campo \'Valor Fixo da Doa√ß√£o\'.',
      fixed_value_greater_than_goal_error: 'O valor fixo da doa√ß√£o n√£o pode ser maior que a meta de arrecada√ß√£o.',
      sending_transaction_confirm_wallet: 'Enviando transa√ß√£o... Por favor, confirme na carteira.',
      transaction_sent_waiting_blockchain: 'Transa√ß√£o enviada! Aguardando confirma√ß√£o da blockchain...',
      project_created_success: 'Projeto criado com sucesso! ÔøΩÔøΩ',
      project_creation_canceled_by_user: 'Cria√ß√£o de projeto cancelada pelo usu√°rio.',
      error_creating_project_prefix: 'Erro ao criar projeto:', // Prefixo para console.error
      generic_error_creating_project: 'Ocorreu um erro ao criar o projeto. Por favor, tente novamente.',
      blockchain_error: 'Erro na Blockchain:',
      transaction_error: 'Erro na Transa√ß√£o:',
      general_error: 'Erro:',
    },
  };

// 2. Fun√ß√£o para determinar o idioma inicial
function getBrowserLanguage() {
  const navigatorLanguage = navigator.language.toLowerCase();
  if (navigatorLanguage.startsWith('pt')) { // Inclui 'pt-br', 'pt-pt', etc.
    return 'pt-br';
  }
  // Fallback para ingl√™s se n√£o for portugu√™s ou se n√£o houver prefer√™ncia espec√≠fica
  return 'en';
}

function getInitialLocale() {
  // Tenta obter o idioma salvo no localStorage
  const savedLocale = localStorage.getItem('user-locale');
  if (savedLocale && messages[savedLocale]) {
    return savedLocale;
  }

  // Se n√£o houver salvo, tenta o idioma do navegador
  return getBrowserLanguage();
}

const i18n = createI18n({
  legacy: false, // Necess√°rio para Vue 3 Composition API
  locale: getInitialLocale(), // Idioma inicial
  fallbackLocale: 'en', // Idioma de fallback caso uma tradu√ß√£o n√£o seja encontrada no idioma principal
  messages, // As mensagens de tradu√ß√£o
});

export default i18n;